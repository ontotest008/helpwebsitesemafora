<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"> 
<html> 

<!-- Mirrored from help.semafora-systems.com/a_connector_built_in.htm by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 01 Oct 2019 09:10:04 GMT -->
<head> 
   <title> A Connector Built-in </title> 
   <meta name="generator" content="Help & Manual"> 
   <meta name="keywords" content=""> 
   <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> 

   <!-- This line forces IE8 into IE7 mode, safer until IE8 is better known -->
   <meta http-equiv="X-UA-Compatible" content="IE=EmulateIE7" />

   <link type="text/css" href="default.css" rel="stylesheet"> 

<!-- non-scrolling headers for CHM and Webhelp--> 
<style type="text/css" media="screen"> 
<!-- 
   body { 
      margin:0; 
      padding:0; 
      overflow: auto; 
      background: #FFFFFF; 
   } 
   #idheader { 
      width:100%; 
      height:auto; 
      padding: 0; 
      margin: 0; 
      background: #FFFFFF; 
   } 

   /* Set the padding in the OUTER div for MSIE and CHM to prevent the 
      width bug and the horizontal scrollbar bug from activating. */ 

  #idcontent {    
      width: 100%; 
      padding: 0px !important; 
      padding: 10px 15px 5px 10px; 
   } 

/* Set the padding in the INNER div for all other browsers. */ 

  #innerdiv {    
      padding: 10px 5px 5px 10px !important;  
      padding: 0px; 
   } 

         /* These styles are for the header, the print link 
         and the navigation links. Change .topichead padding
         to 5px 5px 0px 5px if you use the Print Topic link.  */

    .topichead {
       padding: 5px;
    }
    
    .navlinks {
      font-size: 10pt;
    }
    .navlinks a {
      text-decoration: underline;
      color: black;
    }
    .navlinks a:visited {
      text-decoration: underline;
      color: grey;
    }
    .navlinks a:hover {
      text-decoration: underline;
      color: grey;
    }

    /* These styles are dynamically assigned with Javascript. 
    Since the media type is "screen", they do not apply for print */ 

   html.nonscroll { 
      overflow:hidden; 
   } 
   body.nonscroll {    
      overflow:hidden; 
      height:100%; 
   } 
   div.nonscroll { 
      overflow:auto; 
   } 
   --> 
   </style> 

 <style TYPE="text/css" media="print">
   <!--

     /* Hide navigation links and add space between header and
      text in the printed version. DON'T change this instance for
     adding the Print Topic link, you need the instance further up! */

     #idnav { display:none;	}
     .topichead { padding: 5px 5px 20px 5px; }
   -->
   </style>

<!-- NS-Header and page initialization -->
<script type="text/javascript"> 
<!--
function pageOffset(win)
{
    if(!win) win = window;
    var pos = {left:0,top:0};

    if(typeof win.pageXOffset != 'undefined')
    {
         // Mozilla/Netscape
         pos.left = win.pageXOffset;
         pos.top = win.pageYOffset;
    }
    else
    {
         var obj = (win.document.compatMode && win.document.compatMode == "CSS1Compat") ?
         win.document.documentElement : win.document.body || null;

         pos.left = obj.scrollLeft;
         pos.top = obj.scrollTop;
    }
    return pos;
}

   function doResize() { 
     var clheight, headheight;
     if (self.innerHeight) // all except Explorer 
     { clheight = self.innerHeight; } 
     else if (document.documentElement && document.documentElement.clientHeight) // Explorer 6 Strict Mode 
     { clheight = document.documentElement.clientHeight; } 
     else if (document.body) // other Explorers 
     { clheight = document.body.clientHeight; } 
     headheight = document.getElementById('idheader').clientHeight;
     if (clheight < headheight ) {clheight = headheight + 1;}
     document.getElementById('idcontent').style.height = clheight - document.getElementById('idheader').clientHeight +'px'; 
   } 

      function nsrInit() { 
     contentbody = document.getElementById('idcontent'); 
     if (contentbody) { 
       aTop = pageOffset.top; //document.getElementById('body').scrollTop; 
       contentbody.className = 'nonscroll'; 
       document.getElementsByTagName('body')[0].className = 'nonscroll'; 
       document.getElementsByTagName('html')[0].className = 'nonscroll'; 
       window.onresize = doResize; 
       doResize(); 
       if (contentbody.scrollTo) { contentbody.scrollTo(aTop,0); }
      } 
   } 
-->
   </script> 
<script type="text/javascript" src="helpman_topicinit.js"></script>
<!-- Redirect browser to frame page if page is not in the content frame. -->
<script type="text/javascript">
<!--
if (location.search.lastIndexOf("toc=0")<=0) {
  if (parent.frames.length==0) { parent.location.href="index4237.html?a_connector_built_in.htm"; }
  else { parent.quicksync('a3.13.5.1.6'); }
}
//-->
</script>
<script type="text/javascript" src="highlight.js"></script></head> 

<body onload="highlight();">
<div id="hmpopupDiv" style="visibility:hidden; position:absolute; z-index:1000; "></div> 
<div id="idheader"> 
<table width="100%" border="0" cellspacing="0" cellpadding="0"; alink="black">
  
  <tr valign="middle">
    <td width="10px">&nbsp;</td>
    <td align="left"> <span style="font-size: 9pt"> 
     <a href="the_multiply_example_built_in.html"><img src="previous.gif" border=0 alt="Previous topic"></a>&nbsp;  
      <a href="about_the_ontoprise_helpsystem.html"><img src="top.gif" border=0 alt="Top" style="padding-top:5px"></a>&nbsp;
     <a href="important_note_for_datatype_co.html"><img src="next.gif" border=0 alt="Next topic"></a>
     <!--IF_TOPIC_BREADCRUMBS>OntoBroker 6.1 &gt; <a href="interfaces_to_ontobroker.htm">Interfaces to OntoBroker</a> &gt; <a href="using_the_extension_api_to_dev.htm">Using the Extension API to Develop OntoBroker Extensions</a> &gt; Developing Your Own Built-ins > <%TOPIC_HEADER_TEXT%--></span>
    </td>

     <!--td align="left"> <span style="font-size: 9pt"> 
     OntoBroker 6.1 &gt; <a href="interfaces_to_ontobroker.htm">Interfaces to OntoBroker</a> &gt; <a href="using_the_extension_api_to_dev.htm">Using the Extension API to Develop OntoBroker Extensions</a> &gt; Developing Your Own Built-ins 
     <a href="the_multiply_example_built_in.htm">the_multiply_example_built_in.htm</a>&nbsp;/&nbsp;
     a_connector_built_in.htm
    </td-->

    <td align="right"> <span style="font-size: 9pt"> 
     
     &nbsp;<a href="javascript: print();"><img src="print.gif" border="0" style="padding-top:5px; padding-right:5px" alt="Print this Topic" title="Print this Topic"></a>
     
     </span>
    </td>
  </tr>
  
  <tr valign="middle" style="padding-top:10px">
    <td width="10px">&nbsp;</td>
    <td width="70%" align="left" style="border-bottom-width:2px; border-bottom-style:solid; border-bottom-color:#CECECE"><p class="p_Heading1"><span class="f_Heading1">A Connector Built-in</span></p>
</td>
    <td>&nbsp;</td>
  </tr>



</table>
</div> 

<div id="idcontent"><div id="innerdiv"> 
<p>A connector is a built-in which is used to access external servers (for example, databases, indexes, search engines). <br>
Query of the ontology:</p>
<p class="p_CodeExample"><span class="f_CodeExample">?- p(?X) AND democonnector(?X,?Y).</span></p>
<p class="p_Heading2"><span class="f_Heading2">How A Connector Works:</span></p>
<p>At first OntoBroker looks what variables have to be bound, free and which variables are not important for being evaluable. Then, it asks the connector for the goodness of some of the patterns. It is up to the connector to interpret the goodness, it could be the difference of a full table scan and using the primary key of a database access. </p>
<p>Then, the instance of the connector for the evaluation is created, and init is called. Start is called, followed by some calls for input. The connector could now start to work. If it needs to have all input tuples, it has to start the evaluation when stop is called. The connector has to send all data before leaving the stop method. (So don't use a separate thread for it.) After stop was called, other start/input*/stop cycles could occur. evaluationFinished may possible be called and could be followed from a repetition of the evaluation, but now started with start/input*/stop cycles. </p>
<p class="p_CodeExample"><span class="f_CodeExample" style="font-weight: bold;">package</span><span class="f_CodeExample" style="color: #ffffff;"> </span><span class="f_CodeExample">com.ontoprise.builtin.iconnector;</span><span class="f_CodeExample" style="color: #ffffff;"> </span></p>
<p class="p_CodeExample"><span class="f_CodeExample" style="color: #ffffff;">  </span></p>
<p class="p_CodeExample"><span class="f_CodeExample" style="font-weight: bold;">import</span><span class="f_CodeExample" style="color: #ffffff;"> </span><span class="f_CodeExample">java.io.BufferedReader;</span><span class="f_CodeExample" style="color: #ffffff;"> </span></p>
<p class="p_CodeExample"><span class="f_CodeExample" style="font-weight: bold;">import</span><span class="f_CodeExample" style="color: #ffffff;"> </span><span class="f_CodeExample">java.io.IOException;</span><span class="f_CodeExample" style="color: #ffffff;"> </span></p>
<p class="p_CodeExample"><span class="f_CodeExample" style="font-weight: bold;">import</span><span class="f_CodeExample" style="color: #ffffff;"> </span><span class="f_CodeExample">java.io.InputStreamReader;</span><span class="f_CodeExample" style="color: #ffffff;"> </span></p>
<p class="p_CodeExample"><span class="f_CodeExample" style="font-weight: bold;">import</span><span class="f_CodeExample" style="color: #ffffff;"> </span><span class="f_CodeExample">java.net.MalformedURLException;</span><span class="f_CodeExample" style="color: #ffffff;"> </span></p>
<p class="p_CodeExample"><span class="f_CodeExample" style="font-weight: bold;">import</span><span class="f_CodeExample" style="color: #ffffff;"> </span><span class="f_CodeExample">java.net.URL;</span><span class="f_CodeExample" style="color: #ffffff;"> </span></p>
<p class="p_CodeExample"><span class="f_CodeExample" style="font-weight: bold;">import</span><span class="f_CodeExample" style="color: #ffffff;"> </span><span class="f_CodeExample">java.util.ArrayList;</span><span class="f_CodeExample" style="color: #ffffff;"> </span></p>
<p class="p_CodeExample"><span class="f_CodeExample" style="font-weight: bold;">import</span><span class="f_CodeExample" style="color: #ffffff;"> </span><span class="f_CodeExample">java.util.BitSet;</span><span class="f_CodeExample" style="color: #ffffff;"> </span></p>
<p class="p_CodeExample"><span class="f_CodeExample" style="color: #ffffff;">  </span></p>
<p class="p_CodeExample"><span class="f_CodeExample" style="font-weight: bold;">import</span><span class="f_CodeExample" style="color: #ffffff;"> </span><span class="f_CodeExample">org.apache.log4j.Logger;</span><span class="f_CodeExample" style="color: #ffffff;"> </span></p>
<p class="p_CodeExample"><span class="f_CodeExample" style="font-weight: bold;">import</span><span class="f_CodeExample" style="color: #ffffff;"> </span><span class="f_CodeExample">org.semanticweb.kaon2.api.KAON2Exception;</span><span class="f_CodeExample" style="color: #ffffff;"> </span></p>
<p class="p_CodeExample"><span class="f_CodeExample" style="font-weight: bold;">import</span><span class="f_CodeExample" style="color: #ffffff;"> </span><span class="f_CodeExample">org.semanticweb.kaon2.api.KAON2Manager;</span><span class="f_CodeExample" style="color: #ffffff;"> </span></p>
<p class="p_CodeExample"><span class="f_CodeExample" style="font-weight: bold;">import</span><span class="f_CodeExample" style="color: #ffffff;"> </span><span class="f_CodeExample">org.semanticweb.kaon2.api.logic.Term;</span><span class="f_CodeExample" style="color: #ffffff;"> </span></p>
<p class="p_CodeExample"><span class="f_CodeExample" style="color: #ffffff;">  </span></p>
<p class="p_CodeExample"><span class="f_CodeExample" style="font-weight: bold;">import</span><span class="f_CodeExample" style="color: #ffffff;"> </span><span class="f_CodeExample">com.ontoprise.builtin.BuiltinContext;</span><span class="f_CodeExample" style="color: #ffffff;"> </span></p>
<p class="p_CodeExample"><span class="f_CodeExample" style="font-weight: bold;">import</span><span class="f_CodeExample" style="color: #ffffff;"> </span><span class="f_CodeExample">com.ontoprise.builtin.BuiltinSpec;</span><span class="f_CodeExample" style="color: #ffffff;"> </span></p>
<p class="p_CodeExample"><span class="f_CodeExample" style="font-weight: bold;">import</span><span class="f_CodeExample" style="color: #ffffff;"> </span><span class="f_CodeExample">com.ontoprise.builtin.interfaces.IConnector;</span><span class="f_CodeExample" style="color: #ffffff;"> </span></p>
<p class="p_CodeExample"><span class="f_CodeExample" style="font-weight: bold;">import</span><span class="f_CodeExample" style="color: #ffffff;"> </span><span class="f_CodeExample">com.ontoprise.builtin.interfaces.IGrounds;</span><span class="f_CodeExample" style="color: #ffffff;"> </span></p>
<p class="p_CodeExample"><span class="f_CodeExample" style="font-weight: bold;">import</span><span class="f_CodeExample" style="color: #ffffff;"> </span><span class="f_CodeExample">com.ontoprise.builtin.interfaces.IReceiver;</span><span class="f_CodeExample" style="color: #ffffff;"> </span></p>
<p class="p_CodeExample"><span class="f_CodeExample" style="font-weight: bold;">import</span><span class="f_CodeExample" style="color: #ffffff;"> </span><span class="f_CodeExample">com.ontoprise.util.OntopriseConstants;</span><span class="f_CodeExample" style="color: #ffffff;"> </span></p>
<p class="p_CodeExample"><span class="f_CodeExample" style="font-weight: bold;">import</span><span class="f_CodeExample" style="color: #ffffff;"> </span><span class="f_CodeExample">com.ontoprise.util.TermUtilities;</span><span class="f_CodeExample" style="color: #ffffff;"> </span></p>
<p class="p_CodeExample"><span class="f_CodeExample" style="font-weight: bold;">import</span><span class="f_CodeExample" style="color: #ffffff;"> </span><span class="f_CodeExample">com.ontoprise.utils.StringUtil;</span><span class="f_CodeExample" style="color: #ffffff;"> </span></p>
<p class="p_CodeExample"><span class="f_CodeExample" style="color: #ffffff;">  </span></p>
<p class="p_CodeExample"><span class="f_CodeExample" style="font-style: italic;">/** </span></p>
<p class="p_CodeExample"><span class="f_CodeExample" style="font-style: italic;"> * Example connector which reads information from a URL. A connector receives a list of tuples </span></p>
<p class="p_CodeExample"><span class="f_CodeExample" style="font-style: italic;"> * and sends away a list of tuples. This demo connector reads the content of each URL and determines </span></p>
<p class="p_CodeExample"><span class="f_CodeExample" style="font-style: italic;"> * the number of characters for each URL. </span></p>
<p class="p_CodeExample"><span class="f_CodeExample" style="font-style: italic;"> * </span></p>
<p class="p_CodeExample"><span class="f_CodeExample" style="font-style: italic;"> */</span><span class="f_CodeExample" style="color: #ffffff;"> </span></p>
<p class="p_CodeExample"><span class="f_CodeExample" style="font-weight: bold;">public</span><span class="f_CodeExample" style="color: #ffffff;"> </span><span class="f_CodeExample" style="font-weight: bold;">class</span><span class="f_CodeExample" style="color: #ffffff;"> </span><span class="f_CodeExample">CountCharactersOfURLsConnector</span><span class="f_CodeExample" style="color: #ffffff;"> </span><span class="f_CodeExample" style="font-weight: bold;">implements</span><span class="f_CodeExample" style="color: #ffffff;"> </span><span class="f_CodeExample">IConnector</span><span class="f_CodeExample" style="color: #ffffff;"> </span><span class="f_CodeExample">{</span><span class="f_CodeExample" style="color: #ffffff;"> </span></p>
<p class="p_CodeExample"><span class="f_CodeExample" style="color: #ffffff;"> &nbsp;  </span><span class="f_CodeExample" style="font-weight: bold;">private</span><span class="f_CodeExample" style="color: #ffffff;"> </span><span class="f_CodeExample">IReceiver</span><span class="f_CodeExample" style="color: #ffffff;"> </span><span class="f_CodeExample">_destination;</span><span class="f_CodeExample" style="color: #ffffff;"> </span></p>
<p class="p_CodeExample"><span class="f_CodeExample" style="color: #ffffff;"> &nbsp;  </span><span class="f_CodeExample" style="font-weight: bold;">private</span><span class="f_CodeExample" style="color: #ffffff;"> </span><span class="f_CodeExample">ArrayList</span><span class="f_CodeExample" style="color: #ffffff;"> </span><span class="f_CodeExample">_input;</span><span class="f_CodeExample" style="color: #ffffff;"> </span></p>
<p class="p_CodeExample"><span class="f_CodeExample" style="color: #ffffff;"> &nbsp;  </span><span class="f_CodeExample" style="font-weight: bold;">protected</span><span class="f_CodeExample" style="color: #ffffff;"> </span><span class="f_CodeExample" style="font-weight: bold;">static</span><span class="f_CodeExample" style="color: #ffffff;"> </span><span class="f_CodeExample">Logger</span><span class="f_CodeExample" style="color: #ffffff;"> </span><span class="f_CodeExample">_log</span><span class="f_CodeExample" style="color: #ffffff;"> </span><span class="f_CodeExample">=</span><span class="f_CodeExample" style="color: #ffffff;"> </span><span class="f_CodeExample">Logger.getLogger(OntopriseConstants.CORE_LOG);</span><span class="f_CodeExample" style="color: #ffffff;"> </span></p>
<p class="p_CodeExample"><span class="f_CodeExample" style="font-style: italic;">// &nbsp; &nbsp;{{STRING, VARIABLE}}; </span></p>
<p class="p_CodeExample"><span class="f_CodeExample" style="color: #ffffff;">  </span></p>
<p class="p_CodeExample"><span class="f_CodeExample" style="color: #ffffff;"> &nbsp;  </span><span class="f_CodeExample" style="font-style: italic;">/** </span></p>
<p class="p_CodeExample"><span class="f_CodeExample" style="font-style: italic;"> &nbsp; &nbsp; * Provide a no-argument constructur which sets the properties of the connector. </span></p>
<p class="p_CodeExample"><span class="f_CodeExample" style="font-style: italic;"> &nbsp; &nbsp; */</span><span class="f_CodeExample" style="color: #ffffff;"> </span></p>
<p class="p_CodeExample"><span class="f_CodeExample" style="color: #ffffff;"> &nbsp;  </span><span class="f_CodeExample" style="font-weight: bold;">public</span><span class="f_CodeExample" style="color: #ffffff;"> </span><span class="f_CodeExample">CountCharactersOfURLsConnector()</span><span class="f_CodeExample" style="color: #ffffff;"> </span><span class="f_CodeExample">{</span><span class="f_CodeExample" style="color: #ffffff;"> </span></p>
<p class="p_CodeExample"><span class="f_CodeExample" style="color: #ffffff;"> &nbsp;  </span><span class="f_CodeExample">}</span><span class="f_CodeExample" style="color: #ffffff;"> </span></p>
<p class="p_CodeExample"><span class="f_CodeExample" style="color: #ffffff;">&nbsp;</span></p>
<p class="p_CodeExample"><span class="f_CodeExample" style="color: #ffffff;"> &nbsp; </span></p>
<p class="p_CodeExample"><span class="f_CodeExample" style="color: #ffffff;"> &nbsp;  </span><span class="f_CodeExample" style="font-style: italic;">/** </span></p>
<p class="p_CodeExample"><span class="f_CodeExample" style="font-style: italic;"> &nbsp; &nbsp; * Method to get informations about this built-in. This method has to deliver a valid BuiltinSpec object </span></p>
<p class="p_CodeExample"><span class="f_CodeExample" style="font-style: italic;"> &nbsp; &nbsp; * after the constructor finishes, before init() has be called. </span></p>
<p class="p_CodeExample"><span class="f_CodeExample" style="font-style: italic;"> &nbsp; &nbsp; * </span></p>
<p class="p_CodeExample"><span class="f_CodeExample" style="font-style: italic;"> &nbsp; &nbsp; * @return BuiltinSpec object with informations about this built-in. </span></p>
<p class="p_CodeExample"><span class="f_CodeExample" style="font-style: italic;"> &nbsp; &nbsp; */</span><span class="f_CodeExample" style="color: #ffffff;"> </span></p>
<p class="p_CodeExample"><span class="f_CodeExample" style="color: #ffffff;"> &nbsp;  </span><span class="f_CodeExample">@Override</span><span class="f_CodeExample" style="color: #ffffff;"> </span></p>
<p class="p_CodeExample"><span class="f_CodeExample" style="color: #ffffff;"> &nbsp;  </span><span class="f_CodeExample" style="font-weight: bold;">public</span><span class="f_CodeExample" style="color: #ffffff;"> </span><span class="f_CodeExample">BuiltinSpec</span><span class="f_CodeExample" style="color: #ffffff;"> </span><span class="f_CodeExample">getInfo()</span><span class="f_CodeExample" style="color: #ffffff;"> </span><span class="f_CodeExample">{</span><span class="f_CodeExample" style="color: #ffffff;"> </span></p>
<p class="p_CodeExample"><span class="f_CodeExample" style="color: #ffffff;"> &nbsp; &nbsp; &nbsp;  </span><span class="f_CodeExample">BuiltinSpec.Builder</span><span class="f_CodeExample" style="color: #ffffff;"> </span><span class="f_CodeExample">builder</span><span class="f_CodeExample" style="color: #ffffff;"> </span><span class="f_CodeExample">=</span><span class="f_CodeExample" style="color: #ffffff;"> </span><span class="f_CodeExample" style="font-weight: bold;">new</span><span class="f_CodeExample" style="color: #ffffff;"> </span><span class="f_CodeExample">BuiltinSpec.Builder(</span><span class="f_CodeExample" style="font-weight: bold;">this</span><span class="f_CodeExample">,</span><span class="f_CodeExample" style="color: #ffffff;"> </span><span class="f_CodeExample">"countCharactersOfURLs",</span><span class="f_CodeExample" style="color: #ffffff;"> </span><span class="f_CodeExample">2);</span><span class="f_CodeExample" style="color: #ffffff;"> </span></p>
<p class="p_CodeExample"><span class="f_CodeExample" style="color: #ffffff;"> &nbsp; &nbsp; &nbsp;  </span><span class="f_CodeExample">builder.setDescription("gets number of characters of different URI-documents");</span><span class="f_CodeExample" style="color: #ffffff;"> </span></p>
<p class="p_CodeExample"><span class="f_CodeExample" style="color: #ffffff;"> &nbsp; &nbsp; &nbsp;  </span><span class="f_CodeExample">builder.setParameters("URI","number of characters");</span><span class="f_CodeExample" style="color: #ffffff;"> </span></p>
<p class="p_CodeExample"><span class="f_CodeExample" style="color: #ffffff;"> &nbsp; &nbsp; &nbsp;  </span><span class="f_CodeExample" style="font-weight: bold;">return</span><span class="f_CodeExample" style="color: #ffffff;">  </span><span class="f_CodeExample">builder.build();</span><span class="f_CodeExample" style="color: #ffffff;"> </span></p>
<p class="p_CodeExample"><span class="f_CodeExample" style="color: #ffffff;"> &nbsp;  </span><span class="f_CodeExample">}</span><span class="f_CodeExample" style="color: #ffffff;"> </span></p>
<p class="p_CodeExample"><span class="f_CodeExample" style="color: #ffffff;"> &nbsp;  </span></p>
<p class="p_CodeExample"><span class="f_CodeExample" style="color: #ffffff;"> &nbsp;  </span><span class="f_CodeExample" style="font-style: italic;">/** </span></p>
<p class="p_CodeExample"><span class="f_CodeExample" style="font-style: italic;"> &nbsp; &nbsp; * Method to signal that several input tuples will arrive. Between start() and stop() the grounds will not change. </span></p>
<p class="p_CodeExample"><span class="f_CodeExample" style="font-style: italic;"> &nbsp; &nbsp; * </span></p>
<p class="p_CodeExample"><span class="f_CodeExample" style="font-style: italic;"> &nbsp; &nbsp; * @param grounds IGrounds object with grounding informations of all following input tuples. </span></p>
<p class="p_CodeExample"><span class="f_CodeExample" style="font-style: italic;"> &nbsp; &nbsp; * @param destination Receiver for each result created. </span></p>
<p class="p_CodeExample"><span class="f_CodeExample" style="font-style: italic;"> &nbsp; &nbsp; * @throws KAON2Exception Is thrown on Error </span></p>
<p class="p_CodeExample"><span class="f_CodeExample" style="font-style: italic;"> &nbsp; &nbsp; * @throws InterruptedException Is thrown on Interruption </span></p>
<p class="p_CodeExample"><span class="f_CodeExample" style="font-style: italic;"> &nbsp; &nbsp; */</span><span class="f_CodeExample" style="color: #ffffff;"> </span></p>
<p class="p_CodeExample"><span class="f_CodeExample" style="color: #ffffff;"> &nbsp;  </span><span class="f_CodeExample">@Override</span><span class="f_CodeExample" style="color: #ffffff;"> </span></p>
<p class="p_CodeExample"><span class="f_CodeExample" style="color: #ffffff;"> &nbsp;  </span><span class="f_CodeExample" style="font-weight: bold;">public</span><span class="f_CodeExample" style="color: #ffffff;"> </span><span class="f_CodeExample" style="font-weight: bold;">void</span><span class="f_CodeExample" style="color: #ffffff;"> </span><span class="f_CodeExample">start(IGrounds</span><span class="f_CodeExample" style="color: #ffffff;"> </span><span class="f_CodeExample">grounds,</span><span class="f_CodeExample" style="color: #ffffff;"> </span><span class="f_CodeExample">IReceiver</span><span class="f_CodeExample" style="color: #ffffff;"> </span><span class="f_CodeExample">destination)</span><span class="f_CodeExample" style="color: #ffffff;"> </span><span class="f_CodeExample" style="font-weight: bold;">throws</span><span class="f_CodeExample" style="color: #ffffff;"> </span><span class="f_CodeExample">KAON2Exception,</span><span class="f_CodeExample" style="color: #ffffff;"> </span><span class="f_CodeExample">InterruptedException</span><span class="f_CodeExample" style="color: #ffffff;"> </span><span class="f_CodeExample">{</span><span class="f_CodeExample" style="color: #ffffff;"> </span></p>
<p class="p_CodeExample"><span class="f_CodeExample" style="color: #ffffff;"> &nbsp; &nbsp; &nbsp;  </span><span class="f_CodeExample">_destination</span><span class="f_CodeExample" style="color: #ffffff;"> </span><span class="f_CodeExample">=</span><span class="f_CodeExample" style="color: #ffffff;"> </span><span class="f_CodeExample">destination;</span><span class="f_CodeExample" style="color: #ffffff;"> </span></p>
<p class="p_CodeExample"><span class="f_CodeExample" style="color: #ffffff;"> &nbsp; &nbsp; &nbsp;  </span><span class="f_CodeExample">_input</span><span class="f_CodeExample" style="color: #ffffff;"> </span><span class="f_CodeExample">=</span><span class="f_CodeExample" style="color: #ffffff;"> </span><span class="f_CodeExample" style="font-weight: bold;">new</span><span class="f_CodeExample" style="color: #ffffff;"> </span><span class="f_CodeExample">ArrayList(200);</span><span class="f_CodeExample" style="color: #ffffff;"> </span></p>
<p class="p_CodeExample"><span class="f_CodeExample" style="color: #ffffff;"> &nbsp;  </span><span class="f_CodeExample">}</span><span class="f_CodeExample" style="color: #ffffff;"> </span></p>
<p class="p_CodeExample"><span class="f_CodeExample" style="color: #ffffff;"> &nbsp;  </span></p>
<p class="p_CodeExample"><span class="f_CodeExample" style="color: #ffffff;"> &nbsp;  </span><span class="f_CodeExample" style="font-style: italic;">/** </span></p>
<p class="p_CodeExample"><span class="f_CodeExample" style="font-style: italic;"> &nbsp; &nbsp; * This method will provide the input tuples. May just called between start() and stop(). </span></p>
<p class="p_CodeExample"><span class="f_CodeExample" style="font-style: italic;"> &nbsp; &nbsp; * </span></p>
<p class="p_CodeExample"><span class="f_CodeExample" style="font-style: italic;"> &nbsp; &nbsp; * @param input Term[] with input. </span></p>
<p class="p_CodeExample"><span class="f_CodeExample" style="font-style: italic;"> &nbsp; &nbsp; * @throws KAON2Exception Is thrown on Error </span></p>
<p class="p_CodeExample"><span class="f_CodeExample" style="font-style: italic;"> &nbsp; &nbsp; * @throws InterruptedException Is thrown on Interruption </span></p>
<p class="p_CodeExample"><span class="f_CodeExample" style="font-style: italic;"> &nbsp; &nbsp; */</span><span class="f_CodeExample" style="color: #ffffff;"> </span></p>
<p class="p_CodeExample"><span class="f_CodeExample" style="color: #ffffff;"> &nbsp;  </span><span class="f_CodeExample">@Override</span><span class="f_CodeExample" style="color: #ffffff;"> </span></p>
<p class="p_CodeExample"><span class="f_CodeExample" style="color: #ffffff;"> &nbsp;  </span><span class="f_CodeExample" style="font-weight: bold;">public</span><span class="f_CodeExample" style="color: #ffffff;"> </span><span class="f_CodeExample" style="font-weight: bold;">void</span><span class="f_CodeExample" style="color: #ffffff;"> </span><span class="f_CodeExample">input(Term[]</span><span class="f_CodeExample" style="color: #ffffff;"> </span><span class="f_CodeExample">input)</span><span class="f_CodeExample" style="color: #ffffff;"> </span><span class="f_CodeExample" style="font-weight: bold;">throws</span><span class="f_CodeExample" style="color: #ffffff;"> </span><span class="f_CodeExample">KAON2Exception,</span><span class="f_CodeExample" style="color: #ffffff;"> </span><span class="f_CodeExample">InterruptedException</span><span class="f_CodeExample" style="color: #ffffff;"> </span><span class="f_CodeExample">{</span><span class="f_CodeExample" style="color: #ffffff;"> </span></p>
<p class="p_CodeExample"><span class="f_CodeExample" style="color: #ffffff;"> &nbsp; &nbsp; &nbsp;  </span><span class="f_CodeExample">Term[]</span><span class="f_CodeExample" style="color: #ffffff;"> </span><span class="f_CodeExample">terms</span><span class="f_CodeExample" style="color: #ffffff;"> </span><span class="f_CodeExample">=</span><span class="f_CodeExample" style="color: #ffffff;"> </span><span class="f_CodeExample" style="font-weight: bold;">new</span><span class="f_CodeExample" style="color: #ffffff;"> </span><span class="f_CodeExample">Term[input.length];</span><span class="f_CodeExample" style="color: #ffffff;"> </span></p>
<p class="p_CodeExample"><span class="f_CodeExample" style="color: #ffffff;"> &nbsp; &nbsp; &nbsp;  </span><span class="f_CodeExample">System.arraycopy(input,</span><span class="f_CodeExample" style="color: #ffffff;"> </span><span class="f_CodeExample">0,</span><span class="f_CodeExample" style="color: #ffffff;"> </span><span class="f_CodeExample">terms,</span><span class="f_CodeExample" style="color: #ffffff;"> </span><span class="f_CodeExample">0,</span><span class="f_CodeExample" style="color: #ffffff;"> </span><span class="f_CodeExample">input.length);</span><span class="f_CodeExample" style="color: #ffffff;"> </span></p>
<p class="p_CodeExample"><span class="f_CodeExample" style="color: #ffffff;"> &nbsp; &nbsp; &nbsp;  </span><span class="f_CodeExample">_input.add(terms);</span><span class="f_CodeExample" style="color: #ffffff;"> </span></p>
<p class="p_CodeExample"><span class="f_CodeExample" style="color: #ffffff;"> &nbsp;  </span><span class="f_CodeExample">}</span><span class="f_CodeExample" style="color: #ffffff;"> </span></p>
<p class="p_CodeExample"><span class="f_CodeExample" style="color: #ffffff;"> &nbsp;  </span></p>
<p class="p_CodeExample"><span class="f_CodeExample" style="color: #ffffff;"> &nbsp;  </span><span class="f_CodeExample" style="font-style: italic;">/** </span></p>
<p class="p_CodeExample"><span class="f_CodeExample" style="font-style: italic;"> &nbsp; &nbsp; * Method to signal that no further input will follow within this block. </span></p>
<p class="p_CodeExample"><span class="f_CodeExample" style="font-style: italic;"> &nbsp; &nbsp; * (Although there could be another start() / stop() cycle.) </span></p>
<p class="p_CodeExample"><span class="f_CodeExample" style="font-style: italic;"> &nbsp; &nbsp; * All what has to be done to deliver results has to be done here if it was not done before. </span></p>
<p class="p_CodeExample"><span class="f_CodeExample" style="font-style: italic;"> &nbsp; &nbsp; * After this method has finished, any results have to be sended by the IReceiver, no additional </span></p>
<p class="p_CodeExample"><span class="f_CodeExample" style="font-style: italic;"> &nbsp; &nbsp; * data is allowed. </span></p>
<p class="p_CodeExample"><span class="f_CodeExample" style="font-style: italic;"> &nbsp; &nbsp; * </span></p>
<p class="p_CodeExample"><span class="f_CodeExample" style="font-style: italic;"> &nbsp; &nbsp; * @throws KAON2Exception Is thrown on Error </span></p>
<p class="p_CodeExample"><span class="f_CodeExample" style="font-style: italic;"> &nbsp; &nbsp; * @throws InterruptedException Is thrown on Interruption </span></p>
<p class="p_CodeExample"><span class="f_CodeExample" style="font-style: italic;"> &nbsp; &nbsp; */</span><span class="f_CodeExample" style="color: #ffffff;"> </span></p>
<p class="p_CodeExample"><span class="f_CodeExample" style="color: #ffffff;"> &nbsp;  </span><span class="f_CodeExample">@Override</span><span class="f_CodeExample" style="color: #ffffff;"> </span></p>
<p class="p_CodeExample"><span class="f_CodeExample" style="color: #ffffff;"> &nbsp;  </span><span class="f_CodeExample" style="font-weight: bold;">public</span><span class="f_CodeExample" style="color: #ffffff;"> </span><span class="f_CodeExample" style="font-weight: bold;">void</span><span class="f_CodeExample" style="color: #ffffff;"> </span><span class="f_CodeExample">stop()</span><span class="f_CodeExample" style="color: #ffffff;"> </span><span class="f_CodeExample" style="font-weight: bold;">throws</span><span class="f_CodeExample" style="color: #ffffff;"> </span><span class="f_CodeExample">KAON2Exception,</span><span class="f_CodeExample" style="color: #ffffff;"> </span><span class="f_CodeExample">InterruptedException</span><span class="f_CodeExample" style="color: #ffffff;"> </span><span class="f_CodeExample">{</span><span class="f_CodeExample" style="color: #ffffff;"> </span></p>
<p class="p_CodeExample"><span class="f_CodeExample" style="color: #ffffff;"> &nbsp; &nbsp; &nbsp;  </span><span class="f_CodeExample">Term[]</span><span class="f_CodeExample" style="color: #ffffff;"> </span><span class="f_CodeExample">newArguments</span><span class="f_CodeExample" style="color: #ffffff;"> </span><span class="f_CodeExample">=</span><span class="f_CodeExample" style="color: #ffffff;"> </span><span class="f_CodeExample" style="font-weight: bold;">new</span><span class="f_CodeExample" style="color: #ffffff;"> </span><span class="f_CodeExample">Term[2];</span><span class="f_CodeExample" style="color: #ffffff;"> </span></p>
<p class="p_CodeExample"><span class="f_CodeExample" style="color: #ffffff;"> &nbsp; &nbsp; &nbsp;  </span><span class="f_CodeExample" style="font-weight: bold;">for</span><span class="f_CodeExample" style="color: #ffffff;"> </span><span class="f_CodeExample">(Term[]</span><span class="f_CodeExample" style="color: #ffffff;"> </span><span class="f_CodeExample">arguments:</span><span class="f_CodeExample" style="color: #ffffff;"> </span><span class="f_CodeExample">_input)</span><span class="f_CodeExample" style="color: #ffffff;"> </span><span class="f_CodeExample">{</span><span class="f_CodeExample" style="color: #ffffff;"> </span></p>
<p class="p_CodeExample"><span class="f_CodeExample" style="color: #ffffff;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  </span><span class="f_CodeExample">String</span><span class="f_CodeExample" style="color: #ffffff;"> </span><span class="f_CodeExample">url</span><span class="f_CodeExample" style="color: #ffffff;"> </span><span class="f_CodeExample">=</span><span class="f_CodeExample" style="color: #ffffff;"> </span><span class="f_CodeExample">StringUtil.unQuote((String)</span><span class="f_CodeExample" style="color: #ffffff;"> </span><span class="f_CodeExample">TermUtilities.getValue(arguments[0]));</span><span class="f_CodeExample" style="color: #ffffff;"> </span></p>
<p class="p_CodeExample"><span class="f_CodeExample" style="color: #ffffff;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  </span><span class="f_CodeExample" style="font-weight: bold;">int</span><span class="f_CodeExample" style="color: #ffffff;"> </span><span class="f_CodeExample">numOfCharacters</span><span class="f_CodeExample" style="color: #ffffff;"> </span><span class="f_CodeExample">=</span><span class="f_CodeExample" style="color: #ffffff;"> </span><span class="f_CodeExample">openAndReadURL(url);</span><span class="f_CodeExample" style="color: #ffffff;"> </span></p>
<p class="p_CodeExample"><span class="f_CodeExample" style="color: #ffffff;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  </span><span class="f_CodeExample">newArguments[0]</span><span class="f_CodeExample" style="color: #ffffff;"> </span><span class="f_CodeExample">=</span><span class="f_CodeExample" style="color: #ffffff;"> </span><span class="f_CodeExample">arguments[0];</span><span class="f_CodeExample" style="color: #ffffff;"> </span></p>
<p class="p_CodeExample"><span class="f_CodeExample" style="color: #ffffff;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  </span><span class="f_CodeExample">newArguments[1]</span><span class="f_CodeExample" style="color: #ffffff;"> </span><span class="f_CodeExample">=</span><span class="f_CodeExample" style="color: #ffffff;"> </span><span class="f_CodeExample">KAON2Manager.factory().constant(</span><span class="f_CodeExample" style="font-weight: bold;">new</span><span class="f_CodeExample" style="color: #ffffff;"> </span><span class="f_CodeExample">Double(numOfCharacters));</span><span class="f_CodeExample" style="color: #ffffff;"> </span></p>
<p class="p_CodeExample"><span class="f_CodeExample" style="color: #ffffff;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  </span><span class="f_CodeExample">_destination.send(newArguments);</span><span class="f_CodeExample" style="color: #ffffff;"> </span></p>
<p class="p_CodeExample"><span class="f_CodeExample" style="color: #ffffff;"> &nbsp; &nbsp; &nbsp;  </span><span class="f_CodeExample">}</span><span class="f_CodeExample" style="color: #ffffff;"> </span></p>
<p class="p_CodeExample"><span class="f_CodeExample" style="color: #ffffff;"> &nbsp;  </span><span class="f_CodeExample">}</span><span class="f_CodeExample" style="color: #ffffff;"> </span></p>
<p class="p_CodeExample"><span class="f_CodeExample" style="color: #ffffff;">&nbsp;</span></p>
<p class="p_CodeExample"><span class="f_CodeExample" style="color: #ffffff;">&nbsp;</span></p>
<p class="p_CodeExample"><span class="f_CodeExample" style="color: #ffffff;"> &nbsp;  </span><span class="f_CodeExample" style="font-style: italic;">/** </span></p>
<p class="p_CodeExample"><span class="f_CodeExample" style="font-style: italic;"> &nbsp; &nbsp; * Opens a URL, reads the content and counts the characters. </span></p>
<p class="p_CodeExample"><span class="f_CodeExample" style="font-style: italic;"> &nbsp; &nbsp; * </span></p>
<p class="p_CodeExample"><span class="f_CodeExample" style="font-style: italic;"> &nbsp; &nbsp; * @param urlString &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; the URL </span></p>
<p class="p_CodeExample"><span class="f_CodeExample" style="font-style: italic;"> &nbsp; &nbsp; * @return &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;the number of characters of the document at the URL location </span></p>
<p class="p_CodeExample"><span class="f_CodeExample" style="font-style: italic;"> &nbsp; &nbsp; */</span><span class="f_CodeExample" style="color: #ffffff;"> </span></p>
<p class="p_CodeExample"><span class="f_CodeExample" style="color: #ffffff;"> &nbsp;  </span><span class="f_CodeExample" style="font-weight: bold;">private</span><span class="f_CodeExample" style="color: #ffffff;"> </span><span class="f_CodeExample" style="font-weight: bold;">int</span><span class="f_CodeExample" style="color: #ffffff;"> </span><span class="f_CodeExample">openAndReadURL(String</span><span class="f_CodeExample" style="color: #ffffff;"> </span><span class="f_CodeExample">urlString)</span><span class="f_CodeExample" style="color: #ffffff;"> </span><span class="f_CodeExample">{</span><span class="f_CodeExample" style="color: #ffffff;"> </span></p>
<p class="p_CodeExample"><span class="f_CodeExample" style="color: #ffffff;"> &nbsp; &nbsp; &nbsp;  </span><span class="f_CodeExample" style="font-weight: bold;">int</span><span class="f_CodeExample" style="color: #ffffff;"> </span><span class="f_CodeExample">numOfCharacters</span><span class="f_CodeExample" style="color: #ffffff;"> </span><span class="f_CodeExample">=</span><span class="f_CodeExample" style="color: #ffffff;"> </span><span class="f_CodeExample">0;</span><span class="f_CodeExample" style="color: #ffffff;"> </span></p>
<p class="p_CodeExample"><span class="f_CodeExample" style="color: #ffffff;"> &nbsp; &nbsp; &nbsp;  </span><span class="f_CodeExample" style="font-weight: bold;">try</span><span class="f_CodeExample" style="color: #ffffff;"> </span><span class="f_CodeExample">{</span><span class="f_CodeExample" style="color: #ffffff;"> </span></p>
<p class="p_CodeExample"><span class="f_CodeExample" style="color: #ffffff;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  </span><span class="f_CodeExample">URL</span><span class="f_CodeExample" style="color: #ffffff;"> </span><span class="f_CodeExample">url</span><span class="f_CodeExample" style="color: #ffffff;"> </span><span class="f_CodeExample">=</span><span class="f_CodeExample" style="color: #ffffff;"> </span><span class="f_CodeExample" style="font-weight: bold;">new</span><span class="f_CodeExample" style="color: #ffffff;"> </span><span class="f_CodeExample">URL(urlString);</span><span class="f_CodeExample" style="color: #ffffff;"> </span></p>
<p class="p_CodeExample"><span class="f_CodeExample" style="color: #ffffff;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  </span><span class="f_CodeExample">InputStreamReader</span><span class="f_CodeExample" style="color: #ffffff;"> </span><span class="f_CodeExample">isr</span><span class="f_CodeExample" style="color: #ffffff;"> </span><span class="f_CodeExample">=</span><span class="f_CodeExample" style="color: #ffffff;"> </span><span class="f_CodeExample" style="font-weight: bold;">new</span><span class="f_CodeExample" style="color: #ffffff;"> </span><span class="f_CodeExample">InputStreamReader(url.openStream());</span><span class="f_CodeExample" style="color: #ffffff;"> </span></p>
<p class="p_CodeExample"><span class="f_CodeExample" style="color: #ffffff;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  </span><span class="f_CodeExample">BufferedReader</span><span class="f_CodeExample" style="color: #ffffff;"> </span><span class="f_CodeExample">in</span><span class="f_CodeExample" style="color: #ffffff;"> </span><span class="f_CodeExample">=</span><span class="f_CodeExample" style="color: #ffffff;"> </span><span class="f_CodeExample" style="font-weight: bold;">new</span><span class="f_CodeExample" style="color: #ffffff;"> </span><span class="f_CodeExample">BufferedReader(isr);</span><span class="f_CodeExample" style="color: #ffffff;"> </span></p>
<p class="p_CodeExample"><span class="f_CodeExample" style="color: #ffffff;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  </span><span class="f_CodeExample">String</span><span class="f_CodeExample" style="color: #ffffff;"> </span><span class="f_CodeExample">line;</span><span class="f_CodeExample" style="color: #ffffff;"> </span></p>
<p class="p_CodeExample"><span class="f_CodeExample" style="color: #ffffff;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  </span><span class="f_CodeExample" style="font-weight: bold;">while</span><span class="f_CodeExample" style="color: #ffffff;"> </span><span class="f_CodeExample">((line</span><span class="f_CodeExample" style="color: #ffffff;"> </span><span class="f_CodeExample">=</span><span class="f_CodeExample" style="color: #ffffff;"> </span><span class="f_CodeExample">in.readLine())</span><span class="f_CodeExample" style="color: #ffffff;"> </span><span class="f_CodeExample">!=</span><span class="f_CodeExample" style="color: #ffffff;"> </span><span class="f_CodeExample" style="font-weight: bold;">null</span><span class="f_CodeExample">)</span><span class="f_CodeExample" style="color: #ffffff;"> </span><span class="f_CodeExample">{</span><span class="f_CodeExample" style="color: #ffffff;"> </span></p>
<p class="p_CodeExample"><span class="f_CodeExample" style="color: #ffffff;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  </span><span class="f_CodeExample">numOfCharacters</span><span class="f_CodeExample" style="color: #ffffff;"> </span><span class="f_CodeExample">+=</span><span class="f_CodeExample" style="color: #ffffff;"> </span><span class="f_CodeExample">line.length();</span><span class="f_CodeExample" style="color: #ffffff;"> </span></p>
<p class="p_CodeExample"><span class="f_CodeExample" style="color: #ffffff;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  </span><span class="f_CodeExample">}</span><span class="f_CodeExample" style="color: #ffffff;"> </span></p>
<p class="p_CodeExample"><span class="f_CodeExample" style="color: #ffffff;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  </span><span class="f_CodeExample">in.close();</span><span class="f_CodeExample" style="color: #ffffff;"> </span></p>
<p class="p_CodeExample"><span class="f_CodeExample" style="color: #ffffff;"> &nbsp; &nbsp; &nbsp;  </span><span class="f_CodeExample">}</span><span class="f_CodeExample" style="color: #ffffff;"> </span><span class="f_CodeExample" style="font-weight: bold;">catch</span><span class="f_CodeExample" style="color: #ffffff;"> </span><span class="f_CodeExample">(MalformedURLException</span><span class="f_CodeExample" style="color: #ffffff;"> </span><span class="f_CodeExample">ex)</span><span class="f_CodeExample" style="color: #ffffff;"> </span><span class="f_CodeExample">{</span><span class="f_CodeExample" style="color: #ffffff;"> </span></p>
<p class="p_CodeExample"><span class="f_CodeExample" style="color: #ffffff;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  </span><span class="f_CodeExample">_log.error("DemoConnector received invalid URL: "</span><span class="f_CodeExample" style="color: #ffffff;"> </span><span class="f_CodeExample">+</span><span class="f_CodeExample" style="color: #ffffff;"> </span><span class="f_CodeExample">urlString);</span><span class="f_CodeExample" style="color: #ffffff;"> </span></p>
<p class="p_CodeExample"><span class="f_CodeExample" style="color: #ffffff;"> &nbsp; &nbsp; &nbsp;  </span><span class="f_CodeExample">}</span><span class="f_CodeExample" style="color: #ffffff;"> </span><span class="f_CodeExample" style="font-weight: bold;">catch</span><span class="f_CodeExample" style="color: #ffffff;"> </span><span class="f_CodeExample">(IOException</span><span class="f_CodeExample" style="color: #ffffff;"> </span><span class="f_CodeExample">ex)</span><span class="f_CodeExample" style="color: #ffffff;"> </span><span class="f_CodeExample">{</span><span class="f_CodeExample" style="color: #ffffff;"> </span></p>
<p class="p_CodeExample"><span class="f_CodeExample" style="color: #ffffff;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  </span><span class="f_CodeExample">_log.error("DemoConnector got an IOException while reading the URL '"</span><span class="f_CodeExample" style="color: #ffffff;"> </span><span class="f_CodeExample">+</span><span class="f_CodeExample" style="color: #ffffff;"> </span><span class="f_CodeExample">urlString</span><span class="f_CodeExample" style="color: #ffffff;"> </span><span class="f_CodeExample">+</span><span class="f_CodeExample" style="color: #ffffff;"> </span><span class="f_CodeExample">"'.",</span><span class="f_CodeExample" style="color: #ffffff;"> </span><span class="f_CodeExample">ex);</span><span class="f_CodeExample" style="color: #ffffff;"> </span></p>
<p class="p_CodeExample"><span class="f_CodeExample" style="color: #ffffff;"> &nbsp; &nbsp; &nbsp;  </span><span class="f_CodeExample">}</span><span class="f_CodeExample" style="color: #ffffff;"> </span></p>
<p class="p_CodeExample"><span class="f_CodeExample" style="color: #ffffff;"> &nbsp; &nbsp; &nbsp;  </span><span class="f_CodeExample" style="font-weight: bold;">return</span><span class="f_CodeExample" style="color: #ffffff;"> </span><span class="f_CodeExample">numOfCharacters;</span><span class="f_CodeExample" style="color: #ffffff;"> </span></p>
<p class="p_CodeExample"><span class="f_CodeExample" style="color: #ffffff;"> &nbsp;  </span><span class="f_CodeExample">}</span><span class="f_CodeExample" style="color: #ffffff;"> </span></p>
<p class="p_CodeExample"><span class="f_CodeExample" style="color: #ffffff;">  </span></p>
<p class="p_CodeExample"><span class="f_CodeExample" style="color: #ffffff;"> &nbsp;  </span><span class="f_CodeExample" style="font-style: italic;">/** </span></p>
<p class="p_CodeExample"><span class="f_CodeExample" style="font-style: italic;"> &nbsp; &nbsp; * Returns how effective these grounds may be evaluated. Should deliver 0 if it does not matter. </span></p>
<p class="p_CodeExample"><span class="f_CodeExample" style="font-style: italic;"> &nbsp; &nbsp; * Like IBuiltin.isEvaluable() this method may be called before init() has been called. </span></p>
<p class="p_CodeExample"><span class="f_CodeExample" style="font-style: italic;"> &nbsp; &nbsp; * </span></p>
<p class="p_CodeExample"><span class="f_CodeExample" style="font-style: italic;"> &nbsp; &nbsp; * @param grounds IGrounds object with grounding informations of all following input tuples. </span></p>
<p class="p_CodeExample"><span class="f_CodeExample" style="font-style: italic;"> &nbsp; &nbsp; * @param builtinContext BuiltinContext with additional context informations </span></p>
<p class="p_CodeExample"><span class="f_CodeExample" style="font-style: italic;"> &nbsp; &nbsp; * @param args Literal arguments </span></p>
<p class="p_CodeExample"><span class="f_CodeExample" style="font-style: italic;"> &nbsp; &nbsp; * @return int with goodness value. </span></p>
<p class="p_CodeExample"><span class="f_CodeExample" style="font-style: italic;"> &nbsp; &nbsp; */</span><span class="f_CodeExample" style="color: #ffffff;"> </span></p>
<p class="p_CodeExample"><span class="f_CodeExample" style="color: #ffffff;"> &nbsp;  </span><span class="f_CodeExample">@Override</span><span class="f_CodeExample" style="color: #ffffff;"> </span></p>
<p class="p_CodeExample"><span class="f_CodeExample" style="color: #ffffff;"> &nbsp;  </span><span class="f_CodeExample" style="font-weight: bold;">public</span><span class="f_CodeExample" style="color: #ffffff;"> </span><span class="f_CodeExample" style="font-weight: bold;">int</span><span class="f_CodeExample" style="color: #ffffff;"> </span><span class="f_CodeExample">getGoodness(IGrounds</span><span class="f_CodeExample" style="color: #ffffff;"> </span><span class="f_CodeExample">grounds,</span><span class="f_CodeExample" style="color: #ffffff;"> </span><span class="f_CodeExample">BuiltinContext</span><span class="f_CodeExample" style="color: #ffffff;"> </span><span class="f_CodeExample">builtinContext,</span><span class="f_CodeExample" style="color: #ffffff;"> </span><span class="f_CodeExample">Term[]</span><span class="f_CodeExample" style="color: #ffffff;"> </span><span class="f_CodeExample">args)</span><span class="f_CodeExample" style="color: #ffffff;"> </span><span class="f_CodeExample" style="font-weight: bold;">throws</span><span class="f_CodeExample" style="color: #ffffff;"> </span><span class="f_CodeExample">KAON2Exception,</span><span class="f_CodeExample" style="color: #ffffff;"> </span><span class="f_CodeExample">InterruptedException</span><span class="f_CodeExample" style="color: #ffffff;"> </span><span class="f_CodeExample">{</span><span class="f_CodeExample" style="color: #ffffff;"> </span></p>
<p class="p_CodeExample"><span class="f_CodeExample" style="color: #ffffff;"> &nbsp; &nbsp; &nbsp;  </span><span class="f_CodeExample" style="font-style: italic;">// this connector has just one possible binding, so just use a constant number between 0 and 1000. </span></p>
<p class="p_CodeExample"><span class="f_CodeExample" style="color: #ffffff;"> &nbsp; &nbsp; &nbsp;  </span><span class="f_CodeExample" style="font-style: italic;">// 1000 should mean this connector is much faster than a connector with goodness 0. </span></p>
<p class="p_CodeExample"><span class="f_CodeExample" style="color: #ffffff;"> &nbsp; &nbsp; &nbsp;  </span><span class="f_CodeExample" style="font-weight: bold;">return</span><span class="f_CodeExample" style="color: #ffffff;"> </span><span class="f_CodeExample">500;</span><span class="f_CodeExample" style="color: #ffffff;"> </span></p>
<p class="p_CodeExample"><span class="f_CodeExample" style="color: #ffffff;"> &nbsp;  </span><span class="f_CodeExample">}</span><span class="f_CodeExample" style="color: #ffffff;"> </span></p>
<p class="p_CodeExample"><span class="f_CodeExample" style="color: #ffffff;">  </span></p>
<p class="p_CodeExample"><span class="f_CodeExample">&nbsp;</span></p>
<p class="p_CodeExample"><span class="f_CodeExample" style="color: #ffffff;"> &nbsp;  </span><span class="f_CodeExample" style="font-style: italic;">/** </span></p>
<p class="p_CodeExample"><span class="f_CodeExample" style="font-style: italic;"> &nbsp; &nbsp; * This method will be called after evaluation for cleanup purposes. </span></p>
<p class="p_CodeExample"><span class="f_CodeExample" style="font-style: italic;"> &nbsp; &nbsp; * </span></p>
<p class="p_CodeExample"><span class="f_CodeExample" style="font-style: italic;"> &nbsp; &nbsp; * NOTE: It is possible that this operator will be used again when the same query object is openened again. </span></p>
<p class="p_CodeExample"><span class="f_CodeExample" style="font-style: italic;"> &nbsp; &nbsp; * init() won't be called a second time. </span></p>
<p class="p_CodeExample"><span class="f_CodeExample" style="font-style: italic;"> &nbsp; &nbsp; * </span></p>
<p class="p_CodeExample"><span class="f_CodeExample" style="font-style: italic;"> &nbsp; &nbsp; * @throws KAON2Exception Is thrown on Error </span></p>
<p class="p_CodeExample"><span class="f_CodeExample" style="font-style: italic;"> &nbsp; &nbsp; * @throws InterruptedException Is thrown on Interruption </span></p>
<p class="p_CodeExample"><span class="f_CodeExample" style="font-style: italic;"> &nbsp; &nbsp; */</span><span class="f_CodeExample" style="color: #ffffff;"> </span></p>
<p class="p_CodeExample"><span class="f_CodeExample" style="color: #ffffff;"> &nbsp;  </span><span class="f_CodeExample">@Override</span><span class="f_CodeExample" style="color: #ffffff;"> </span></p>
<p class="p_CodeExample"><span class="f_CodeExample" style="color: #ffffff;"> &nbsp;  </span><span class="f_CodeExample" style="font-weight: bold;">public</span><span class="f_CodeExample" style="color: #ffffff;"> </span><span class="f_CodeExample" style="font-weight: bold;">void</span><span class="f_CodeExample" style="color: #ffffff;"> </span><span class="f_CodeExample">evaluationFinished()</span><span class="f_CodeExample" style="color: #ffffff;"> </span><span class="f_CodeExample" style="font-weight: bold;">throws</span><span class="f_CodeExample" style="color: #ffffff;"> </span><span class="f_CodeExample">KAON2Exception,</span><span class="f_CodeExample" style="color: #ffffff;"> </span><span class="f_CodeExample">InterruptedException</span><span class="f_CodeExample" style="color: #ffffff;"> </span><span class="f_CodeExample">{</span><span class="f_CodeExample" style="color: #ffffff;"> </span></p>
<p class="p_CodeExample"><span class="f_CodeExample" style="color: #ffffff;"> &nbsp; &nbsp; &nbsp;  </span><span class="f_CodeExample" style="font-style: italic;">// This built-in has just one state, no need to set it back. </span></p>
<p class="p_CodeExample"><span class="f_CodeExample" style="color: #ffffff;"> &nbsp; &nbsp; &nbsp;  </span><span class="f_CodeExample" style="font-style: italic;">// It is used to set a built-in to the post-init() state. </span></p>
<p class="p_CodeExample"><span class="f_CodeExample" style="color: #ffffff;"> &nbsp; &nbsp; &nbsp;  </span><span class="f_CodeExample" style="font-style: italic;">// btw.: This is not a dispose method, don't use it to clean up. Maybe it won't be called. </span></p>
<p class="p_CodeExample"><span class="f_CodeExample" style="color: #ffffff;"> &nbsp;  </span><span class="f_CodeExample">}</span><span class="f_CodeExample" style="color: #ffffff;"> </span></p>
<p class="p_CodeExample"><span class="f_CodeExample" style="color: #ffffff;">  </span></p>
<p class="p_CodeExample"><span class="f_CodeExample" style="color: #ffffff;"> &nbsp;  </span><span class="f_CodeExample" style="font-style: italic;">/** </span></p>
<p class="p_CodeExample"><span class="f_CodeExample" style="font-style: italic;"> &nbsp; &nbsp; * Initialisation of this built-in. This is done for the instance before evaluation. </span></p>
<p class="p_CodeExample"><span class="f_CodeExample" style="font-style: italic;"> &nbsp; &nbsp; * </span></p>
<p class="p_CodeExample"><span class="f_CodeExample" style="font-style: italic;"> &nbsp; &nbsp; * @param context Contains additional Informations needed for some built-ins </span></p>
<p class="p_CodeExample"><span class="f_CodeExample" style="font-style: italic;"> &nbsp; &nbsp; * @param args Term[] that contains the literal arguments. </span></p>
<p class="p_CodeExample"><span class="f_CodeExample" style="font-style: italic;"> &nbsp; &nbsp; * @throws KAON2Exception Is thrown on Error </span></p>
<p class="p_CodeExample"><span class="f_CodeExample" style="font-style: italic;"> &nbsp; &nbsp; * @throws InterruptedException Is thrown on Interruption </span></p>
<p class="p_CodeExample"><span class="f_CodeExample" style="font-style: italic;"> &nbsp; &nbsp; */</span><span class="f_CodeExample" style="color: #ffffff;"> </span></p>
<p class="p_CodeExample"><span class="f_CodeExample" style="color: #ffffff;"> &nbsp;  </span><span class="f_CodeExample">@Override</span><span class="f_CodeExample" style="color: #ffffff;"> </span></p>
<p class="p_CodeExample"><span class="f_CodeExample" style="color: #ffffff;"> &nbsp;  </span><span class="f_CodeExample" style="font-weight: bold;">public</span><span class="f_CodeExample" style="color: #ffffff;"> </span><span class="f_CodeExample" style="font-weight: bold;">void</span><span class="f_CodeExample" style="color: #ffffff;"> </span><span class="f_CodeExample">init(BuiltinContext</span><span class="f_CodeExample" style="color: #ffffff;"> </span><span class="f_CodeExample">context,</span><span class="f_CodeExample" style="color: #ffffff;"> </span><span class="f_CodeExample">Term[]</span><span class="f_CodeExample" style="color: #ffffff;"> </span><span class="f_CodeExample">args)</span><span class="f_CodeExample" style="color: #ffffff;"> </span><span class="f_CodeExample" style="font-weight: bold;">throws</span><span class="f_CodeExample" style="color: #ffffff;"> </span><span class="f_CodeExample">KAON2Exception,</span><span class="f_CodeExample" style="color: #ffffff;"> </span><span class="f_CodeExample">InterruptedException</span><span class="f_CodeExample" style="color: #ffffff;"> </span><span class="f_CodeExample">{</span><span class="f_CodeExample" style="color: #ffffff;"> </span></p>
<p class="p_CodeExample"><span class="f_CodeExample" style="color: #ffffff;"> &nbsp;  </span><span class="f_CodeExample">}</span><span class="f_CodeExample" style="color: #ffffff;"> </span></p>
<p class="p_CodeExample"><span class="f_CodeExample" style="color: #ffffff;"> &nbsp;  </span></p>
<p class="p_CodeExample"><span class="f_CodeExample" style="color: #ffffff;"> &nbsp;  </span><span class="f_CodeExample" style="font-style: italic;">/** </span></p>
<p class="p_CodeExample"><span class="f_CodeExample" style="font-style: italic;"> &nbsp; &nbsp; * Method to determine if a certain grounds configuration is evaluable. </span></p>
<p class="p_CodeExample"><span class="f_CodeExample" style="font-style: italic;"> &nbsp; &nbsp; * This method has to be usable context free, init() is called in an other instance as </span></p>
<p class="p_CodeExample"><span class="f_CodeExample" style="font-style: italic;"> &nbsp; &nbsp; * isEvaluable will be called. All needed information should be provided by the current </span></p>
<p class="p_CodeExample"><span class="f_CodeExample" style="font-style: italic;"> &nbsp; &nbsp; * method arguments. </span></p>
<p class="p_CodeExample"><span class="f_CodeExample" style="font-style: italic;"> &nbsp; &nbsp; * </span></p>
<p class="p_CodeExample"><span class="f_CodeExample" style="font-style: italic;"> &nbsp; &nbsp; * @param grounds Object with grounding informations. </span></p>
<p class="p_CodeExample"><span class="f_CodeExample" style="font-style: italic;"> &nbsp; &nbsp; * @param variableInstantiations This BitSets has the instantiation of all variables that occurs. Needed especially if partial-ground functions are used. </span></p>
<p class="p_CodeExample"><span class="f_CodeExample" style="font-style: italic;"> &nbsp; &nbsp; * @param builtinContext BuiltinContext with additional context informations </span></p>
<p class="p_CodeExample"><span class="f_CodeExample" style="font-style: italic;"> &nbsp; &nbsp; * @param args Literal arguments </span></p>
<p class="p_CodeExample"><span class="f_CodeExample" style="font-style: italic;"> &nbsp; &nbsp; * @return if this grounds are evaluable or not. </span></p>
<p class="p_CodeExample"><span class="f_CodeExample" style="font-style: italic;"> &nbsp; &nbsp; * @throws KAON2Exception Is thrown on Error </span></p>
<p class="p_CodeExample"><span class="f_CodeExample" style="font-style: italic;"> &nbsp; &nbsp; */</span><span class="f_CodeExample" style="color: #ffffff;"> </span></p>
<p class="p_CodeExample"><span class="f_CodeExample" style="color: #ffffff;"> &nbsp;  </span><span class="f_CodeExample">@Override</span><span class="f_CodeExample" style="color: #ffffff;"> </span></p>
<p class="p_CodeExample"><span class="f_CodeExample" style="color: #ffffff;"> &nbsp;  </span><span class="f_CodeExample" style="font-weight: bold;">public</span><span class="f_CodeExample" style="color: #ffffff;"> </span><span class="f_CodeExample" style="font-weight: bold;">boolean</span><span class="f_CodeExample" style="color: #ffffff;"> </span><span class="f_CodeExample">isEvaluable(IGrounds</span><span class="f_CodeExample" style="color: #ffffff;"> </span><span class="f_CodeExample">grounds,</span><span class="f_CodeExample" style="color: #ffffff;"> </span><span class="f_CodeExample">BitSet</span><span class="f_CodeExample" style="color: #ffffff;"> </span><span class="f_CodeExample">variableInstantiations,</span><span class="f_CodeExample" style="color: #ffffff;"> </span><span class="f_CodeExample">BuiltinContext</span><span class="f_CodeExample" style="color: #ffffff;"> </span><span class="f_CodeExample">builtinContext,</span><span class="f_CodeExample" style="color: #ffffff;"> </span><span class="f_CodeExample">Term[]</span><span class="f_CodeExample" style="color: #ffffff;"> </span><span class="f_CodeExample">args)</span><span class="f_CodeExample" style="color: #ffffff;"> </span><span class="f_CodeExample" style="font-weight: bold;">throws</span><span class="f_CodeExample" style="color: #ffffff;"> </span><span class="f_CodeExample">KAON2Exception</span><span class="f_CodeExample" style="color: #ffffff;"> </span><span class="f_CodeExample">{</span><span class="f_CodeExample" style="color: #ffffff;"> </span></p>
<p class="p_CodeExample"><span class="f_CodeExample" style="color: #ffffff;"> &nbsp; &nbsp; &nbsp;  </span><span class="f_CodeExample" style="font-weight: bold;">return</span><span class="f_CodeExample" style="color: #ffffff;"> </span><span class="f_CodeExample">grounds.getBitSet().get(0)</span><span class="f_CodeExample" style="color: #ffffff;"> </span><span class="f_CodeExample">&amp;&amp;</span><span class="f_CodeExample" style="color: #ffffff;"> </span><span class="f_CodeExample">!grounds.getBitSet().get(1);</span><span class="f_CodeExample" style="color: #ffffff;"> </span><span class="f_CodeExample" style="font-style: italic;">// the first argument must be ground, the second argument must not be ground. </span></p>
<p class="p_CodeExample"><span class="f_CodeExample" style="color: #ffffff;"> &nbsp;  </span><span class="f_CodeExample">}</span><span class="f_CodeExample" style="color: #ffffff;"> </span></p>
<p class="p_CodeExample"><span class="f_CodeExample" style="color: #ffffff;">  </span></p>
<p class="p_CodeExample"><span class="f_CodeExample">}</span><span class="f_CodeExample" style="color: #ffffff;"> </span></p>
 
</div></div> 

<script type="text/javascript"> 
<!-- 
var lastSlashPos = document.URL.lastIndexOf("index.html") >
document.URL.lastIndexOf("\\") ? document.URL.lastIndexOf("index.html") :
document.URL.lastIndexOf("\\");
if( document.URL.substring( lastSlashPos + 1, lastSlashPos + 4).toLowerCase() != "~hh" )
{
    nsrInit();
}
--> 
</script> 
</body> 

<!-- Mirrored from help.semafora-systems.com/a_connector_built_in.htm by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 01 Oct 2019 09:10:05 GMT -->
</html>
